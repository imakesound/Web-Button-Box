<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Button Accordion - Preset XML Loading v1.9</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/opensheetmusicdisplay@1.8.4/build/opensheetmusicdisplay.min.js"></script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="flex flex-col min-h-screen max-h-screen p-4 font-['Inter'] overflow-hidden">

    <div id="ui-controls">
         <button id="toggle-sheet-music" title="Show/Hide Sheet Music">Show Music</button>
         <div class="control-group"> <label for="theme-select">Theme:</label> <select name="themes" id="theme-select" class="control-select"> <option value="dark">Dark</option> <option value="light">Light</option> <option value="mexico">Mexico</option> </select> </div>
         <div class="control-group"> <label for="tone-select">Tone:</label> <select name="tones" id="tone-select" class="control-select"> <option value="FBE" selected>FBE</option> <option value="GCF">GCF</option> </select> </div>

         <div class="recording-controls">
               <button id="record-btn">Record</button>
               <button id="play-rec-btn" disabled>Play Recording</button>
               <button id="stop-rec-btn" disabled>Stop</button>
               <div class="control-group">
                    <input type="checkbox" id="rec-loop-checkbox" disabled>
                    <label for="rec-loop-checkbox" class="loop-label">Loop</label>
                    <label for="rec-loop-start-time" class="loop-label">Start(s):</label>
                    <input type="number" id="rec-loop-start-time" class="time-input" min="0" step="0.1" value="0" disabled>
                    <label for="rec-loop-end-time" class="loop-label">End(s):</label>
                    <input type="number" id="rec-loop-end-time" class="time-input" min="0" step="0.1" value="0" disabled>
               </div>
               <button id="save-rec-btn" disabled>Save Recording</button>
               <button id="download-rec-btn" disabled>Download Recording</button>
               <input type="file" id="load-rec-file-input" accept=".json,application/json">
               <label for="load-rec-file-input" id="load-rec-file-label" class="button-like">Upload Recording</label>
               <div class="control-group">
                   <label for="recording-select">Load Saved:</label>
                   <select id="recording-select" class="control-select">
                       <option value="">-- Select --</option>
                   </select>
               </div>
                <div class="control-group">
                    <button id="load-rec-btn" disabled>Load</button>
                    <button id="rename-rec-btn" disabled>Rename</button>
                    <button id="delete-rec-btn" disabled>Delete</button>
                </div>
         </div>
    </div>
    <div id="loading-indicator">Loading audio samples...</div>

    <div class="accordion-wrapper">
        <div class="button-board-container">
            <div class="button-board">
                <div class="button-row"> <button class="acc-button" data-button-id="B1">B1</button> <button class="acc-button" data-button-id="B2">B2</button> <button class="acc-button" data-button-id="B3">B3</button> <button class="acc-button" data-button-id="B4">B4</button> <button class="acc-button" data-button-id="B5">B5</button> <button class="acc-button" data-button-id="B6">B6</button> <button class="acc-button" data-button-id="B7">B7</button> <button class="acc-button" data-button-id="B8">B8</button> <button class="acc-button" data-button-id="B9">B9</button> <button class="acc-button" data-button-id="B10">B10</button> <button class="acc-button" data-button-id="B11">B11</button> </div>
                <div class="button-row"> <button class="acc-button" data-button-id="B12">B12</button> <button class="acc-button" data-button-id="B13">B13</button> <button class="acc-button" data-button-id="B14">B14</button> <button class="acc-button" data-button-id="B15">B15</button> <button class="acc-button" data-button-id="B16">B16</button> <button class="acc-button" data-button-id="B17">B17</button> <button class="acc-button" data-button-id="B18">B18</button> <button class="acc-button" data-button-id="B19">B19</button> <button class="acc-button" data-button-id="B20">B20</button> <button class="acc-button" data-button-id="B21">B21</button> <button class="acc-button" data-button-id="B22">B22</button> <button class="acc-button" data-button-id="B23">B23</button> </div>
                <div class="button-row"> <button class="acc-button" data-button-id="B24">B24</button> <button class="acc-button" data-button-id="B25">B25</button> <button class="acc-button" data-button-id="B26">B26</button> <button class="acc-button" data-button-id="B27">B27</button> <button class="acc-button" data-button-id="B28">B28</button> <button class="acc-button" data-button-id="B29">B29</button> <button class="acc-button" data-button-id="B30">B30</button> <button class="acc-button" data-button-id="B31">B31</button> <button class="acc-button" data-button-id="B32">B32</button> <button class="acc-button" data-button-id="B33">B33</button> <button class="acc-button" data-button-id="B34">B34</button> </div>
           </div>
            <div id="bellows-toggle" title="Hold for PULL sound (Release for PUSH)">P U S H</div>
        </div>

        <div id="music-sheet-area" class="hidden">
             <div id="osmd-container">
                 <p style="padding: 10px; text-align: center; color: var(--text-color-ui-label);">Load a MusicXML file (.xml, .musicxml) to display sheet music.</p>
                 <div id="custom-highlight"></div>
             </div>
             <div id="playback-status">Status: Ready</div>
             <div id="playback-progress-display">--:-- / --:--</div>
             <div class="playback-controls">
                 <label for="musicxml-file" class="button">Load File</label>
                 <input type="file" id="musicxml-file" accept=".musicxml,.xml" style="display: none;">
                 <select id="xml-preset-select">
                     <option value="">-- Select Preset --</option>
                 </select>
                 <button id="load-preset-btn">Load Preset</button>
                 <button id="play-btn" disabled>Play (Strict)</button>
                 <button id="play-sub-btn" disabled>Play All (Subs)</button>
                 <button id="stop-btn" disabled>Stop</button>
                 <input type="checkbox" id="loop-checkbox" class="ml-2">
                 <label for="loop-checkbox" class="loop-label">Loop Music</label>
                 <label for="loop-start-measure" class="loop-label">Start:</label>
                 <input type="number" id="loop-start-measure" class="measure-input" min="1" value="1">
                 <label for="loop-end-measure" class="loop-label">End:</label>
                 <input type="number" id="loop-end-measure" class="measure-input" min="1" value="1">
                 <div class="speed-control">
                     <label for="speed-slider">Speed:</label>
                     <input type="range" id="speed-slider" min="0.1" max="2.0" step="0.05" value="1.0">
                     <span id="speed-display">1.00x</span>
                 </div>
             </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="js/main.js"></script>
    <script src="js/audio-engine.js"></script>
    <script src="js/ui-controls.js"></script>
    <script src="js/music-playback.js"></script>
    <script src="js/recording.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/preset-loader.js"></script>
</body>
</html>
